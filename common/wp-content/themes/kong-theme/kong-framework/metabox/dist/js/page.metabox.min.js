!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};t.m=e,t.c=o,t.p="",t(0)}([function(e,exports,t){"use strict";t(1),function(e){var t=e.module("kong.page.metabox",["colorpicker.module"]);t.__config={enableDebug:!1},"undefined"!=typeof kong_mb_data&&(t.__config=e.merge(t.__config,kong_mb_data)),t.controller("kong.page.metabox.controller",function(){}).config(["$provide","$httpProvider",function(e,o){e.factory("lbHttpInterceptor",["$q","$rootScope",function(e,o){return{request:function(o){return o.headers["X-WP-Nonce"]=t.__config.nonce,o||e.when(o)},responseError:function(t){return void 0!==t.data&&"rest_cookie_invalid_nonce"==t.data.code&&o.$emit("expired_session"),e.reject(t)}}}]),o.interceptors.push("lbHttpInterceptor")}]),t.config(["$compileProvider",function(e){e.debugInfoEnabled(t.__config.enableDebug)}]),t.component("pageMetabox",{controller:["$rootScope",function(e){this.model=t.__config.settings,this.setting={current_tab:1,tabs:[{id:1,name:"Layout"},{id:2,name:"Additional Content"}],get_current:function(){return this.current_tab},is_current:function(e){return e==this.current_tab},set_current:function(e){this.current_tab=e}},e.$on("expired_session",function(){document.location.replace(t.__config.login_url)})}],template:'<input type="hidden" id="kong-settings" name="kong-settings" value="{{$ctrl.model}}"/><div class="kong-mb__container"><mb-header model="$ctrl.model"></mb-header><mb-body model="$ctrl.model" setting="$ctrl.setting"></mb-body></div>'}),t.component("mbHeader",{controller:["$timeout","$http",function(e,o){var n=this;this.state="disabled";var i=JSON.stringify(this.model);this.save=function(l){l.preventDefault(),"ready"==n.state&&(n.state="saving",o({method:"POST",url:t.__config.api+"/settings",data:{id:t.__config.post_id,settings:JSON.stringify(n.model)}}).then(function(t){-1!=t.data?(n.state="saved",e(function(){i=JSON.stringify(n.model),n.state="disabled"},1e3)):(alert("Error in saving data"),n.state="ready")},function(e){alert("Error in saving data"),n.state="ready"}))},n.getState=function(){return"disabled"==n.state&&JSON.stringify(n.model)!==i&&(n.state="ready"),n.state}}],template:'<div class="kong-mb__header"><h6 class="kong-mb__header__title">Settings</h6><button class="kong-mb__saveBtn kong-ui__btn kong-ui__btn--primary" ng-class="\'kong-mb__saveBtn--\'+$ctrl.getState()" ng-click="$ctrl.save($event)"><span>Saved</span><span>Save</span><span></span><span><i class="fa fa-check" aria-hidden="true"></i></span></button></div>',bindings:{model:"<"}}),t.component("mbBody",{controller:function(){},template:'<div class="kong-mb__body"><mb-menu on-select="$ctrl.setting.set_current(id)" tabs="$ctrl.setting.tabs" current-tab="$ctrl.setting.current_tab"></mb-menu><mb-panel current-tab="$ctrl.setting.current_tab" model="$ctrl.model"></mb-panel></div>',bindings:{model:"=",setting:"<",current:"<"}}),t.component("mbMenu",{controller:function(){},template:'<div class="kong-mb__menu"><ul><li class="kong-mb__menu__item"ng-class="{\'kong-mb__menu__item--active\':$ctrl.currentTab == item.id}"ng-click="$ctrl.onSelect(item)"ng-repeat="item in ::$ctrl.tabs" ng-bind="::item.name"></li></ul></div>',bindings:{onSelect:"&",tabs:"<",currentTab:"<"}}),t.component("mbPanel",{controller:function(){},template:'<div class="kong-mb__panelContainer"><mb-layout-panel ng-if="$ctrl.currentTab == 1" model="$ctrl.model.layout"></mb-layout-panel><mb-addition-panel ng-if="$ctrl.currentTab == 2" model="$ctrl.model.addition"></mb-addition-panel></div>',bindings:{currentTab:"<",model:"="}}),t.component("mbLayoutPanel",{controller:function(){this.layouts=["blank","fullwidth","sidebar-left","sidebar-right"],this.selectLayout=function(e){this.model.type=e},this.sidebars=t.__config.sidebars||{},this.validSidebar=function(){return"sidebar-left"==this.model.type||"sidebar-right"==this.model.type}},template:'<div class="kong-mb__panel"><div class="kong-mb__section"><h3 class="kong-mb__section__name">Display Feature Image</h3><p class="kong-mb__section__desc">Activate this button to display a hero banner containing the feature image of this page.</p><kong-ed-switch model="$ctrl.model.feature_image"></kong-ed-switch></div><div class="kong-mb__section kong-mb__section--noVPadding"><div class="kong-mb__section--1-2" ><h3 class="kong-mb__section__name">Layout</h3><p class="kong-mb__section__desc">Select a layout to present this page. It depends on you to choose whether to include sidebar in the layout or not.</p><ul class="kong-ui__layout"><li class="kong-ui__layout__item" ng-repeat="layout in ::$ctrl.layouts"ng-class="{\'kong-ui__layout__item--selected\':$ctrl.model.type == layout}"ng-click="$ctrl.selectLayout(layout)"><img ng-src="'+t.__config.img_dir+'/layouts/{{::layout}}.png"></li></ul></div><div class="kong-mb__section--1-2" ng-class="{\'kong-mb__block--disabled\':!$ctrl.validSidebar()}"><h3 class="kong-mb__section__name">Sidebar</h3><p class="kong-mb__section__desc">This sidebar will be displayed if you choose page with right or left sidebar layout.</p><div list-selection ng-model="$ctrl.model.sidebar" ng-list="$ctrl.sidebars" ng-default="{id:0, name:\'Select a Sidebar\'}"></div></div></div><div class="kong-mb__section"><h3 class="kong-mb__section__name">Breadcrumb</h3><p class="kong-mb__section__desc">Activate this button to display a breadcrumb for this page. It allows users to keep track of their locations from this page.</p><kong-ed-switch model="$ctrl.model.breadcrumb"></kong-ed-switch></div></div>',bindings:{model:"="}}),t.component("mbAdditionPanel",{controller:function(){},template:'<div class="kong-mb__panel"><div class="kong-mb__section"><h3 class="kong-mb__section__name">Before</h3><p class="kong-mb__section__desc">Add additional content before the page layout. Shortcodes and html are accepted.</p><textarea class="kong-ui__textarea" type="text" ng-model="$ctrl.model.before" rows="5" cols="20" ng-model-options="{debounce:500}"/></div><div class="kong-mb__section"><h3 class="kong-mb__section__name">After</h3><p class="kong-mb__section__desc">Add additional content after the page layout. Shortcodes and html are accepted.</p><textarea class="kong-ui__textarea" type="text" ng-model="$ctrl.model.after" rows="5" cols="20" ng-model-options="{debounce:500}"/></div></div>',bindings:{model:"="}});var o=0;t.component("kongEdSwitch",{controller:function(){this.id="lbswid-"+ ++o},template:'<div class="kong-ui__switch"><input class="kong-ui__switch__checkbox" type="checkbox" ng-model="$ctrl.model" id="{{::$ctrl.id}}"/><label class="kong-ui__switch__btn" for="{{::$ctrl.id}}"><span class="kong-ui__switch__btn__toggle"></span></label></div>',bindings:{model:"="}}),t.component("kongEdWordCounter",{controller:function(){},template:'<div class="kong-ui__wordCounter"><input class="kong-ui__wordCounter__input kong-ui__inputText" type="text" maxlength="{{::$ctrl.maxLength}}" placeholder="{{::$ctrl.placeholder}}" ng-model="$ctrl.model"/><div class="kong-ui__wordCounter__counter"><span ng-bind="$ctrl.model.length+\'/\'+$ctrl.maxLength"></span></div></div>',bindings:{model:"=",maxLength:"@",placeholder:"@"}}),t.component("kongEdHeroImage",{controller:["$scope",function(e){var t,o,n=this;this.upload=function(){t=wp.media({title:"Upload or Choose from Media Library",button:{text:"Select Image"},multiple:!1}),t.on("select",function(){o=t.state().get("selection").first().toJSON(),e.$apply(function(){n.model.id=o.id,n.model.url=o.url})}),t.open()},this.remove=function(){this.model.id="",this.model.url=""}}],template:'<div class="kong-ui__heroImage"><div class="kong-ui__heroImage__header"><span class="kong-ui__btn kong-ui__btn--remove kong-ui--marginRight3" ng-click="$ctrl.remove()" ng-show="$ctrl.model.url"><span class="fa fa-trash"></span> Remove</span><span class="kong-ui__btn kong-ui__btn--plain" ng-click="$ctrl.upload()"><span class="fa fa-upload"></span> Upload</span></div><div class="kong-ui__heroImage__body"ng-class="{\'kong-ui__heroImage__body--hasImage\':$ctrl.model.url }"ng-style="{\'background-image\':\'url(\'+$ctrl.model.url+\')\',\'background-position\':$ctrl.model.bg_position}"><div drag-position="$ctrl.model.bg_position" ng-if="$ctrl.model.url"></div><div class="kong-ui__heroImage__content"><h4 class="kong-ui__heroImage__title" ng-if="$ctrl.model.title" ng-bind="$ctrl.model.title" ng-style="{\'color\':$ctrl.model.title_color}"></h4><p class="kong-ui__heroImage__desc" ng-if="$ctrl.model.desc" ng-bind="$ctrl.model.desc" ng-style="{\'color\':$ctrl.model.desc_color}"></p></div><div class="kong-ui__heroImage__overlay" ng-style="{\'background\':\'linear-gradient(\'+$ctrl.model.overlay_top+\',\'+ $ctrl.model.overlay_bottom +\' )\'}"></div></div></div>',bindings:{model:"="}}),t.directive("listSelection",function(){return{restrict:"A",scope:{ngModel:"=",ngList:"=",ngDefault:"="},link:function(t,o,n){var i=Date.now(),l=jQuery('<select id="uq-'+i+'" style="width: 100%"></select>');if(e.isObject(t.ngDefault)&&l.append('<option value="'+t.ngDefault.id+'">'+t.ngDefault.name+"</option>"),e.isArray(t.ngList)){var r=!0,a=!1,s=void 0;try{for(var c,d=t.ngList[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var u=c.value,p=u.id==t.ngModel?'selected="selected"':"";l.append('<option value="'+u.id+'" '+p+">"+u.name+"</option>")}}catch(e){a=!0,s=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw s}}}else if(e.isObject(t.ngList)){var g=!0,m=!1,f=void 0;try{for(var _,b=Object.keys(t.ngList)[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var h=_.value,k=t.ngList[h],v=k.id==t.ngModel?'selected="selected"':"";l.append('<option value="'+h+'" '+v+">"+k.name+"</option>")}}catch(e){m=!0,f=e}finally{try{!g&&b.return&&b.return()}finally{if(m)throw f}}}o.append(l),l.select2();var y=!1;l.on("change",function(){if(y)return void(y=!1);t.$apply(function(){t.ngModel=l.val()})}),t.$watch("ngModel",function(){y=!0,l.val(t.ngModel).trigger("change")})}}}),t.directive("dragPosition",["$document",function(t){return{restrict:"A",scope:{dragPosition:"="},link:function(o,n,i){function l(e){p=e.pageY-d,u=e.pageX-c;var t=n.height(),i=n.width();p<0?(p=0,s=0):p>t?(p=t,s=100):s=100*p/t,u<0?(u=0,a=0):u>i?(u=i,a=100):a=100*u/i,g.css({top:p+"px",left:u+"px"}),o.$apply(function(){o.dragPosition=a.toFixed(2)+"% "+s.toFixed(2)+"%"})}function r(){t.off("mousemove",l),t.off("mouseup",r)}n.addClass("kong-ui__dragPoint");var a,s,c=0,d=0,u=0,p=0;o.dragPosition||(o.dragPosition="50% 50%"),p=o.dragPosition.split(" ")[0],u=o.dragPosition.split(" ")[1],p=parseFloat(p.substring(0,p.length-1))*n.height()/100,u=parseFloat(u.substring(0,u.length-1))*n.width()/100;var g=e.element("<span></span>");g.css({top:p+"px",left:u+"px"}),n.append(g),g.on("mousedown",function(e){e.preventDefault(),c=e.pageX-u,d=e.pageY-p,t.on("mousemove",l),t.on("mouseup",r)})}}}]),t.component("kongEdColorpicker",{controller:function(){},template:'<div class="kong-ui__colorpicker"><small ng-show="$ctrl.model != \'transparent\'" class="kong-ui__colorpicker__transparentBtn" ng-click="$ctrl.model=\'transparent\'" title="Transparent"><i class="fa fa-genderless" aria-hidden="true"></i></small><input class="kong-ui__colorpicker__input" ng-model="$ctrl.model" type="text"><span class="kong-ui__colorpicker__picker" colorpicker="{{::$ctrl.format}}" colorpicker-position="bottom" ng-model="$ctrl.model" ng-model-options="{ debounce: 250 }"><i ng-style="{\'background-color\':$ctrl.model}"></i></span></div>',bindings:{model:"=",format:"@"}})}(window.angular)},function(e,exports){"use strict";angular.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(e){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector).bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var o=0,n=0,i=e.getBoundingClientRect();e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t||"BODY"!==e.tagName?(o+=e.scrollLeft,n+=e.scrollTop):(o+=document.documentElement.scrollLeft||e.scrollLeft,n+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:i.top+window.pageYOffset,left:i.left+window.pageXOffset,scrollX:o,scrollY:n}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,o,n){e/=255,t/=255,o/=255;var i,l,r,a;return r=Math.max(e,t,o),a=r-Math.min(e,t,o),i=0===a?null:r===e?(t-o)/a:r===t?(o-e)/a+2:(e-t)/a+4,i=(i+360)%6*60/360,l=0===a?0:a/r,{h:i||1,s:l,b:r,a:n||1}},setColor:function(t){t=t?t.toLowerCase():t;for(var o in e.stringParsers)if(e.stringParsers.hasOwnProperty(o)){var n=e.stringParsers[o],i=n.re.exec(t),l=i&&n.parse(i);if(l)return this.value=this.RGBtoHSB.apply(null,l),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,o,n){e||(e=this.value.h,t=this.value.s,o=this.value.b),e*=360;var i,l,r,a,s;return e=e%360/60,s=o*t,a=s*(1-Math.abs(e%2-1)),i=l=r=o-s,e=~~e,i+=[s,a,0,0,a,s][e],l+=[a,s,s,a,0,0][e],r+=[0,0,a,s,s,a][e],{r:Math.round(255*i),g:Math.round(255*l),b:Math.round(255*r),a:n||this.value.a}},toHex:function(e,t,o,n){var i=this.toRGB(e,t,o,n);return"#"+(1<<24|parseInt(i.r,10)<<16|parseInt(i.g,10)<<8|parseInt(i.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},o={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||o.left)-o.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||o.top)-o.top)))},setSlider:function(n,i){var l=e.closestSlider(n.target),r=e.getOffset(l,i),a=l.getBoundingClientRect(),s=n.clientX-a.left,c=n.clientY-a.top;t.knob=l.children[0].style,t.left=n.pageX-r.left-window.pageXOffset+r.scrollX,t.top=n.pageY-r.top-window.pageYOffset+r.scrollY,o={left:n.pageX-(s-t.left),top:n.pageY-(c-t.top)}},setSaturation:function(e,o){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,o)},setHue:function(e,o){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,o)},setAlpha:function(e,o){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,o)},setKnob:function(e,o){t.knob.top=e+"px",t.knob.left=o+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,t,o,n,i){return{require:"?ngModel",restrict:"A",link:function(l,r,a,s){function c(){e.on("mousemove",u),e.on("mouseup",p)}function d(){try{A.css("backgroundColor",T[v]())}catch(e){A.css("backgroundColor",T.toHex())}M.css("backgroundColor",T.toHex(T.value.h,1,1,1)),"rgba"===v&&(k.css.backgroundColor=T.toHex())}function u(e){var t=n.getLeftPosition(e),o=n.getTopPosition(e),i=n.getSlider();n.setKnob(o,t),i.callLeft&&T[i.callLeft].call(T,t/100),i.callTop&&T[i.callTop].call(T,o/100),d();var a=T[v]();return r.val(a),s&&l.$apply(s.$setViewValue(a)),I&&D.val(a),!1}function p(){b("colorpicker-selected"),e.off("mousemove",u),e.off("mouseup",p)}function g(e){T.setColor(r.val()),I&&!e&&D.val(r.val()),H.eq(0).css({left:100*T.value.s+"px",top:100-100*T.value.b+"px"}),H.eq(1).css("top",100*(1-T.value.h)+"px"),H.eq(2).css("top",100*(1-T.value.a)+"px"),d()}function m(){var e,t=i.getOffset(r[0]);return angular.isDefined(a.colorpickerParent)&&(t.left=0,t.top=0),"top"===y?e={top:t.top-147,left:t.left}:"right"===y?e={top:t.top,left:t.left+126}:"bottom"===y?e={top:t.top+r[0].offsetHeight+2,left:t.left}:"left"===y&&(e={top:t.top,left:t.left-150}),{top:e.top+"px",left:e.left+"px"}}function f(){h()}function _(){C.hasClass("colorpicker-visible")||(g(),C.addClass("colorpicker-visible").css(m()),b("colorpicker-shown"),!1===x&&e.on("mousedown",f),a.colorpickerIsOpen&&(l[a.colorpickerIsOpen]=!0,l.$$phase||l.$digest()))}function b(e){s&&l.$emit(e,{name:a.ngModel,value:s.$modelValue})}function h(){C.hasClass("colorpicker-visible")&&(C.removeClass("colorpicker-visible"),b("colorpicker-closed"),e.off("mousedown",f),a.colorpickerIsOpen&&(l[a.colorpickerIsOpen]=!1,l.$$phase||l.$digest()))}var k,v=a.colorpicker?a.colorpicker:"hex",y=angular.isDefined(a.colorpickerPosition)?a.colorpickerPosition:"bottom",x=!!angular.isDefined(a.colorpickerInline)&&a.colorpickerInline,w=!!angular.isDefined(a.colorpickerFixedPosition)&&a.colorpickerFixedPosition,S=angular.isDefined(a.colorpickerParent)?r.parent():angular.element(document.body),I=!!angular.isDefined(a.colorpickerWithInput)&&a.colorpickerWithInput,$=I?'<input type="text" name="colorpicker-input" spellcheck="false">':"",L=x?"":'<button type="button" class="close close-colorpicker">&times;</button>',P='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+$+L+"</div></div>",C=angular.element(P),T=o,O=C.find("colorpicker-hue"),M=C.find("colorpicker-saturation"),A=C.find("colorpicker-preview"),H=C.find("i");if(t(C)(l),I){var D=C.find("input");D.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(){var e=this.value;r.val(e),s&&s.$modelValue!==e&&(l.$apply(s.$setViewValue(e)),g(!0))})}"rgba"===v&&(C.addClass("alpha"),k=C.find("colorpicker-alpha"),k.on("click",function(e){n.setAlpha(e,w),u(e)}).on("mousedown",function(e){n.setAlpha(e,w),c()}).on("mouseup",function(e){b("colorpicker-selected-alpha")})),O.on("click",function(e){n.setHue(e,w),u(e)}).on("mousedown",function(e){n.setHue(e,w),c()}).on("mouseup",function(e){b("colorpicker-selected-hue")}),M.on("click",function(e){n.setSaturation(e,w),u(e),angular.isDefined(a.colorpickerCloseOnSelect)&&h()}).on("mousedown",function(e){n.setSaturation(e,w),c()}).on("mouseup",function(e){b("colorpicker-selected-saturation")}),w&&C.addClass("colorpicker-fixed-position"),C.addClass("colorpicker-position-"+y),"true"===x&&C.addClass("colorpicker-inline"),S.append(C),s&&(s.$render=function(){r.val(s.$viewValue),g()}),r.on("blur keyup change",function(){g()}),r.on("$destroy",function(){C.remove()}),!1===x?r.on("click",_):_(),C.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),C.find("button").on("click",function(){h()}),a.colorpickerIsOpen&&l.$watch(a.colorpickerIsOpen,function(e){!0===e?_():!1===e&&h()})}}}])}]);